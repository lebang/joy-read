import{r as w,d as b,e as h,f,c as F,b as o,w as l,g as r,o as z,h as C,i as E,j as N}from"./index-DVUiy5Nx.js";const S=n=>w.post("/login",n),j=({id:n})=>w.get("/users/".concat(n)),B=b("user",()=>{const n=h({username:"",nickName:"",email:""}),a=i=>{n.value=i};return{userInfo:n,loginIn:async i=>{const u=await S(i),{user:d}=await j({id:u.userId});return console.log("user:",d),a(d),!0}}}),K=(n,a)=>{const t=n.__vccOpts||n;for(const[i,u]of a)t[i]=u;return t},L={class:"layout"},O=Object.assign({name:"Login"},{__name:"index",setup(n){const a=h(null),t=f({login:"admin",password:"123456"}),d=f({login:[{validator:(c,e,s)=>{if(e.length<5)return s(new Error("请输入正确的用户名"));s()},trigger:"blur"}],password:[{validator:(c,e,s)=>{if(e.length<6)return s(new Error("请输入正确的密码"));s()},trigger:"blur"}],captcha:[{message:"验证码格式不正确",trigger:"blur"}]}),y=B(),v=async()=>await y.loginIn(t),g=async()=>{await a.value.validate(async c=>{if(!c)return console.log("login: ",c),!1;await v()&&N.emit("router:admin")})};return(c,e)=>{const s=r("el-header"),p=r("el-input"),m=r("el-form-item"),k=r("el-button"),x=r("el-form"),V=r("el-main"),I=r("el-footer"),U=r("el-container");return z(),F("div",L,[o(U,null,{default:l(()=>[o(s),o(V,null,{default:l(()=>[o(x,{ref_key:"loginForm",ref:a,class:"login-form",model:t,rules:d,"validate-on-rule-change":!1,onKeyup:C(g,["enter"])},{default:l(()=>[o(m,{prop:"login"},{default:l(()=>[o(p,{modelValue:t.login,"onUpdate:modelValue":e[0]||(e[0]=_=>t.login=_),size:"large",placeholder:"请输入用户名","suffix-icon":"user"},null,8,["modelValue"])]),_:1}),o(m,{prop:"password"},{default:l(()=>[o(p,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=_=>t.password=_),"show-password":"",size:"large",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),o(m,null,{default:l(()=>[o(k,{type:"primary",size:"large",onClick:g},{default:l(()=>e[2]||(e[2]=[E("登 录")])),_:1,__:[2]})]),_:1})]),_:1},8,["model","rules"])]),_:1}),o(I)]),_:1})])}}}),q=K(O,[["__scopeId","data-v-3daca08e"]]);export{q as default};
